<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-transparent-video-shader@1.0.3/dist/aframe-transparent-video-shader.umd.js"></script>
    <!-- <script>
      AFRAME.registerComponent("foo", {
        init: function() {
          this.el.addEventListener("materialtextureloaded", e => {
            let material = this.el.getObject3D("mesh").material;
						material.map.format = THREE.RGBAFormat;
            material.map.needsUpdate = true;
          });
        }
      });
    </script> -->
    <script>
      AFRAME.registerComponent("playVideo", {
        init: function() {
          this.el.addEventListener("materialtextureloaded", e => {
            var videoEl = this.el.getAttribute('material').src;
            if (!videoEl) { return; }
            this.el.object3D.visible = true;
            videoEl.play();
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene embedded arjs>
      <a-assets>
        <video id="testVideo" src="https://cdn.glitch.com/e3796de4-705d-4b33-a77c-084a0b428d27%2FAlphaTestVideo.webm?1552438409173" muted autoplay loop="true"></video>
      </a-assets>
      <a-marker preset='hiro'>
        <!-- <a-box position='0 1 0' material='opacity: 0.5; color: #F70087;'></a-box> -->
        <!-- <a-plane
          position="0 1 0"
          material="src: https://cdn.glitch.com/e3796de4-705d-4b33-a77c-084a0b428d27%2FAlphaTestVideo.webm?1552438409173; transparent: true;"
          foo
        ></a-plane>       -->
      <!-- <a-entity
        material="shader: transparent-video; src: #testVideo"
        geometry="primitive: plane;
                  width: 1;
                  height: 1.8"
        position="0 1 0">
      </a-entity> -->
      <a-plane
          position="0 1 0"
          material="shader: transparent-video; src: #testVideo"
          playVideo
        ></a-plane>      
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>

    <!-- <a-scene>
      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene> -->
    </body>
</html>